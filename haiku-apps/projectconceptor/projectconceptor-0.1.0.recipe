SUMMARY="A Haiku diagramming application like Microsoft Visio"
DESCRIPTION="ProjectConceptor is a modular application for Haiku and BeOS \
designed to view, edit and process information which can be represented by a \
graph structure."
APP="ProjectConceptor"
HOMEPAGE="https://github.com/Paradoxianer/$APP"
COPYRIGHT="2018 Matthias \“Paradoxer\” Lindner
	2000-2002 Lee Thomason
	1991-2000 Be Incorporated"
LICENSE="BSD (3-clause)
	MIT
	Open Tracker License
	Zlib"
REVISION="3"
srcGitRev="02acd4c38edd861861c3ad1aa2af8783f9dbfb55"
SOURCE_URI="$HOMEPAGE/archive/$srcGitRev.tar.gz"
CHECKSUM_SHA256="711d389a5d0fec7310ea31dccbd5d4d40c9f161fdcbddba2ffa4c87033311ec8"
SOURCE_FILENAME="$APP-$portVersion-$srcGitRev.tar.gz"
SOURCE_DIR="$APP-$srcGitRev"
PATCHES="$APP-$portVersion.patchset"

ARCHITECTURES="x86_gcc2 ?x86 x86_64"

PROVIDES="
	projectconceptor = $portVersion
	app:$APP = $portVersion
	"
REQUIRES="
	haiku
	"

BUILD_REQUIRES="
	haiku_devel
	"
BUILD_PREREQUIRES="
	makefile_engine
	cmd:find
	cmd:g++
	cmd:make
	"

defineDebugInfoPackage projectconceptor \
	"$appsDir"/$APP/Plugins/AddAttribute \
	"$appsDir"/$APP/Plugins/ChangeValue \
	"$appsDir"/$APP/Plugins/Copy \
	"$appsDir"/$APP/Plugins/Delete \
	"$appsDir"/$APP/Plugins/Find \
	"$appsDir"/$APP/Plugins/FreeMindTranslator \
	"$appsDir"/$APP/Plugins/GraphEditor \
	"$appsDir"/$APP/Plugins/Group \
	"$appsDir"/$APP/Plugins/Insert \
	"$appsDir"/$APP/Plugins/Move \
	"$appsDir"/$APP/Plugins/NavigatorEditor \
	"$appsDir"/$APP/Plugins/Paste \
	"$appsDir"/$APP/Plugins/ProjectConceptorTranslator \
	"$appsDir"/$APP/Plugins/RemoveAttribute \
	"$appsDir"/$APP/Plugins/Resize \
	"$appsDir"/$APP/Plugins/Select \
	"$appsDir"/$APP/ProjectConceptor

BUILD()
{
	make -C src OBJ_DIR=objects app plugins translators
}

INSTALL()
{
	install -d $appsDir/$APP/Plugins
	install bin/apps/$APP/$APP $appsDir/$APP
	addAppDeskbarSymlink $appsDir/$APP/$APP

	cd src/plugins
	install $(find * -mindepth 2 -type f -executable) $appsDir/$APP/Plugins
	cd ../translators
	install $(find * -mindepth 2 -type f -executable) $appsDir/$APP/Plugins
}
